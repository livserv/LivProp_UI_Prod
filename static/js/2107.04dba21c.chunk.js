"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[2107],{82921:(t,n,c)=>{c.r(n),c.d(n,{default:()=>u});var e=c(9950),o=c(28429),a=c(32026),i=c(8478),r=c(15820),s=c(78023),d=c(44414);const u=function(){const{organizationId:t,botId:n,recipientId:c,chatId:u}=(0,o.g)(),[_,l]=e.useState();return e.useEffect((()=>{i.Jt("/bot/".concat(t,"/").concat(n,"/chat/history/").concat(c,"/").concat(u,"?includeBot=1")).then((t=>{var n;const c=(0,a.Yq)(null===(n=t.messages[0])||void 0===n?void 0:n.createdAt);t.botDesign=(0,s.Y)(t.botDesign,{window:{width:"600px",height:"calc(100vh - 120px)"},header:{titleText:c+" (".concat(t.titleText,")")}}),l(t)}),(t=>{console.error("Unable to load chat conversations:",t)}))}),[t,n,c,u]),_?(0,d.jsx)("div",{className:"conversation-history",children:(0,d.jsx)(r.A,{botDesign:_.botDesign,messages:_.messages,showTime:!0,disabledMessage:!0})}):(0,d.jsx)("div",{children:"Loading... Please wait..."})}},8478:(t,n,c)=>{c.d(n,{Jt:()=>a,TF:()=>s,bE:()=>i,yJ:()=>r});var e=c(32026),o=c(44364);async function a(t,n){return d("GET",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function i(t,n){return d("POST",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function r(t,n){return d("PUT",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(t,n){return d("DELETE",t,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(t,n,c){let{headers:e,noAuth:o,...a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i="POST"===t||"PUT"===t||"DELETE"===t;n=function(t,n){if(!t)return t;const c=n&&Object.keys(n);if(null!==c&&void 0!==c&&c.length){const e=c.reduce(((t,c)=>{let e=n[c];return null===e||void 0===e?t:(e="".concat(c,"=").concat(encodeURIComponent(e)),t?"".concat(t,"&").concat(e):e)}),"");e&&(t="".concat(t).concat(t.includes("?")?"&":"?").concat(e))}if(t.startsWith("https://"))return t;return"".concat(u).concat(t)}(n,i?void 0:c);const r=c instanceof FormData;if(r||(c=c&&"object"===typeof c&&i?JSON.stringify(c):void 0),e||(e={}),r||(e["Content-Type"]="application/json"),e.Accept="application/json",!1!==o){const t=sessionStorage.getItem("token");t&&(e.Authorization="Bearer ".concat(t))}try{const o=await fetch(n,{...a,headers:e,body:c,method:t}),i=await o.json();if(o.ok){const{data:t,...n}=i;return delete n.status,t&&!Object.keys(n).length?t:i}throw i.message?new Error(i.message):i}catch(d){var s;throw console.error("Error calling API: ",d),null!==(s=d.message)&&void 0!==s&&s.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(d.message)}}const u=(0,e.s8)(o.jn,"/")},32026:(t,n,c)=>{function e(t,n){return t.replace(new RegExp("".concat(o(n),"+$")),"")}function o(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(t){const n=new Date(t),c=n.getDate(),e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()],o=n.getFullYear();return"".concat(e," ").concat(c,", ").concat(o)}function i(t,n,c){if(!n&&!t)return c;t=t||{};const e=Array.isArray(t)?[...t]:{...t};if(n.includes(".")){const o=n.indexOf("."),a=n.substring(0,o),r=n.substring(o+1);e[a]=i(t[a],r,c)}else e[n]=c;return e}function r(t,n){return btoa("".concat(t,"_").concat(n,"_whatsapp_int"))}function s(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const n="abcdefghijklmnopqrstuvwxyz0123456789";let c="";for(let e=0;e<t;e++)c+=n.charAt(Math.floor(36*Math.random()));return c}function d(t,n,c){if(!n&&!t)return c;t=t||{};const e=Array.isArray(t)?[...t]:{...t};if(n.includes(".")){const o=n.indexOf("."),a=n.substring(0,o),i=n.substring(o+1);e[a]=d(t[a],i,c)}else e[n]=c;return e}c.d(n,{G6:()=>i,OX:()=>s,Yq:()=>a,do:()=>d,qW:()=>r,s8:()=>e})},44364:(t,n,c)=>{c.d(n,{DX:()=>r,Og:()=>a,jn:()=>e,pA:()=>i,pR:()=>o});const e="https://backend.livhousing.com",o="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://backend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://backend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_BACKEND_URL:"https://backend.livhousing.com"}.REACT_APP_NGROK_BACKEND_URL||"https://backend.livhousing.com"}}]);