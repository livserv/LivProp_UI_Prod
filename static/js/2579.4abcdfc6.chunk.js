"use strict";(self.webpackChunklib_prop_ui=self.webpackChunklib_prop_ui||[]).push([[2579],{8478:(t,e,n)=>{n.d(e,{Jt:()=>r,TF:()=>c,bE:()=>a,yJ:()=>s});var o=n(32026),i=n(44364);async function r(t,e){return d("GET",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function a(t,e){return d("POST",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function s(t,e){return d("PUT",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function c(t,e){return d("DELETE",t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}async function d(t,e,n){let{headers:o,noAuth:i,...r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a="POST"===t||"PUT"===t||"DELETE"===t;e=function(t,e){if(!t)return t;const n=e&&Object.keys(e);if(null!==n&&void 0!==n&&n.length){const o=n.reduce(((t,n)=>{let o=e[n];return null===o||void 0===o?t:(o=`${n}=${encodeURIComponent(o)}`,t?`${t}&${o}`:o)}),"");o&&(t=`${t}${t.includes("?")?"&":"?"}${o}`)}if(t.startsWith("https://"))return t;return`${l}${t}`}(e,a?void 0:n);const s=n instanceof FormData;if(s||(n=n&&"object"===typeof n&&a?JSON.stringify(n):void 0),o||(o={}),s||(o["Content-Type"]="application/json"),o.Accept="application/json",!1!==i){const t=sessionStorage.getItem("token");t&&(o.Authorization=`Bearer ${t}`)}try{const i=await fetch(e,{...r,headers:o,body:n,method:t}),a=await i.json();if(i.ok){const{data:t,...e}=a;return delete e.status,t&&!Object.keys(e).length?t:a}throw a.message?new Error(a.message):a}catch(d){var c;throw console.error("Error calling API: ",d),null!==(c=d.message)&&void 0!==c&&c.includes("fetch")?new Error("Unable to reach server. Please check your network connectivity and try again."):new Error(d.message)}}const l=(0,o.s8)(i.jn,"/")},11172:(t,e,n)=>{n.d(e,{A:()=>p});n(9950);var o=n(61467),i=n(29714),r=n(60899),a=n(93230),s=n(3788),c=n(2660),d=n(24516),l=n(32829),u=n(93383),g=n(21788),f=n(30334),b=n(33340),h=n(98415),A=n(44414);const p=function(t){const{setIsDeployBot:e,botId:n,organizationId:p}=t,y=(0,b.nc)((t=>t.botsList)).find((t=>t._id===n)),_=null===y||void 0===y?void 0:y.botDetailsForVerification,m=(0,b.nc)((t=>t.isSuperUser)),S={integrationUrl:(null===_||void 0===_?void 0:_.integrationUrl)||""},v=async()=>{const t=S.integrationUrl;try{if(t||""!==t.trim()){await(0,h.yo)(n,{verificationStatus:!0})?(0,g.i)(!0,"The bot verified successfully","success"):(0,g.i)(!0,"Not able to verify the bot. Try after sometime!","error")}else(0,g.i)(!0,"Integration Url is mandatory for bot verification","error")}catch(e){(0,g.i)(!0,"Not able to verify the bot. Try after sometime!","error")}};return(0,A.jsx)(o.l1,{initialValues:S,enableReinitialize:!0,validationSchema:i.Ik().shape({integrationUrl:i.Yj().url("Enter valid url!").max(255).required("Integration Url is required")}),onSubmit:async(t,o)=>{let{setErrors:i,setStatus:r,setSubmitting:a}=o;const s={botDetailsForVerification:{...t}};try{a(!0),await(0,f.pn)(s,p,n),r({success:!0}),e(!1),(0,g.i)(!0,"The bot deployed successfully!","success")}catch(c){r({success:!1}),i({submit:c.message}),a(!1),(0,g.i)(!0,"Not able to deploy the bot. Try after sometime!","error")}},children:t=>{let{errors:e,handleBlur:n,handleChange:o,handleSubmit:i,isSubmitting:g,touched:f,values:b}=t;return(0,A.jsx)("form",{onSubmit:i,children:(0,A.jsxs)(r.Ay,{container:!0,spacing:1,children:[(0,A.jsx)(r.Ay,{item:!0,xs:12,md:12,children:(0,A.jsxs)(a.A,{spacing:1,children:[(0,A.jsx)(s.A,{htmlFor:"integrationUrl",children:"*Integration Url"}),(0,A.jsx)(c.A,{id:"integrationUrl",type:"integrationUrl",value:b.integrationUrl,name:"integrationUrl",autoComplete:"off",onBlur:n,onChange:o,fullWidth:!0,error:Boolean(f.integrationUrl&&e.integrationUrl)}),f.integrationUrl&&e.integrationUrl&&(0,A.jsx)(d.A,{error:!0,id:"helper-text-integrationUrl",children:e.integrationUrl})]})}),(0,A.jsxs)(r.Ay,{container:!0,spacing:2,justifyContent:"flex-end",sx:{mt:1},children:[m&&(0,A.jsx)(r.Ay,{item:!0,children:(0,A.jsx)(l.A,{children:(0,A.jsx)(u.A,{isLoading:g,disabled:g,color:"primary",size:"large",type:"button",variant:"contained",id:"deployBotVerify",onClick:v,children:"Verify"})})}),(0,A.jsx)(r.Ay,{item:!0,children:(0,A.jsx)(l.A,{children:(0,A.jsx)(u.A,{isLoading:g,disabled:g,color:"primary",size:"large",type:"submit",variant:"contained",id:"deployBotSubmit",children:"Submit"})})})]})]})})}})}},26092:(t,e,n)=>{n.d(e,{A:()=>f});n(9950);var o=n(92728),i=n(63464),r=n(40033),a=n(28170),s=n(96319),c=n(59254),d=n(14857),l=n(25333),u=n(44414);const g=(0,c.Ay)(i.A)((t=>{let{theme:e}=t;return{"& .MuiDialogContent-root":{padding:e.spacing(2)},"& .MuiDialogActions-root":{padding:e.spacing(1)},zIndex:11010}}));function f(t){const e=(0,d.A)(),{breakpoints:n}=e,{openPopUpDialog:i,setPopUpDialog:c,onClose:f=()=>c(!1),title:b,width:h="70%"}=t;return(0,u.jsxs)(g,{TransitionComponent:o.A,"aria-labelledby":"customized-dialog-title",open:i,PaperProps:{sx:{width:{width:h},[n.down("sm")]:{width:"90%"}}},children:[(0,u.jsx)(r.A,{sx:{m:0,p:2},id:"customized-dialog-title",children:b}),(0,u.jsx)(l.A,{"aria-label":"close",onClick:f,sx:{position:"absolute",right:8,top:8},children:(0,u.jsx)(s.A,{})}),(0,u.jsx)(a.A,{dividers:!0,children:t.children})]})}},30334:(t,e,n)=>{n.d(e,{Ei:()=>l,KM:()=>s,MD:()=>c,pn:()=>u,qt:()=>d});var o=n(8478),i=n(33340),r=n(77382),a=n(98415);async function s(t,e,n){const i=await o.bE(`/bot/${n}/${e}/add-training-media`,t);(0,a.rv)(e,{trainingMedia:i.trainingMedia})}async function c(t){const{organizationId:e,selectedBotId:n}=i.nc.getState(),r=new FormData;r.append("file",t);try{const t=await o.bE(`/bot/${e}/${n}/add-training-media`,r);(0,a.rv)(n,{trainingMedia:t.trainingMedia})}catch(s){throw new Error("File upload failed. Please try again.",s)}}async function d(t,e,n){const i=await o.bE(`/bot/${n}/${e}/delete-training-media-document`,t);(0,a.rv)(e,{trainingMedia:i.trainingDocuments})}async function l(t,e){const n=await o.bE(`/bot/${e}/${t}/knowledge-base/train`);return i.nc.setState((e=>{const n={...e.kbDocs||{}};return delete n[t],{kbDocs:n}})),(0,r.bZ)().catch((t=>console.error("Error fetching Knowledge base content:",t))),n}async function u(t,e,n){const i=await o.bE(`/bot/${e}/${n}/add-bot-tax-details`,t),{_id:r,botDetailsForVerification:s}=i;return(0,a.rv)(r,{botDetailsForVerification:s}),s}},32026:(t,e,n)=>{function o(t,e){return t.replace(new RegExp(`${i(e)}+$`),"")}function i(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(t){const e=new Date(t),n=e.getDate();return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${n}, ${e.getFullYear()}`}function a(t,e,n){if(!e&&!t)return n;t=t||{};const o=Array.isArray(t)?[...t]:{...t};if(e.includes(".")){const i=e.indexOf("."),r=e.substring(0,i),s=e.substring(i+1);o[r]=a(t[r],s,n)}else o[e]=n;return o}function s(t,e){return btoa(`${t}_${e}_whatsapp_int`)}function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e="abcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let o=0;o<t;o++)n+=e.charAt(Math.floor(36*Math.random()));return n}function d(t,e,n){if(!e&&!t)return n;t=t||{};const o=Array.isArray(t)?[...t]:{...t};if(e.includes(".")){const i=e.indexOf("."),r=e.substring(0,i),a=e.substring(i+1);o[r]=d(t[r],a,n)}else o[e]=n;return o}function l(t,e){const n=new Blob([t],{type:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/csv"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}n.d(e,{G6:()=>a,OX:()=>c,PE:()=>l,Yq:()=>r,do:()=>d,qW:()=>s,s8:()=>o})},32829:(t,e,n)=>{n.d(e,{A:()=>r});var o=n(25371),i=n(44414);function r(t){let{children:e,type:n}=t;return(0,i.jsx)(o.P.div,{whileHover:{scale:1},whileTap:{scale:.9},children:e})}r.defaultProps={type:"scale"}},44364:(t,e,n)=>{n.d(e,{DX:()=>c,Og:()=>r,jn:()=>o,mB:()=>s,pA:()=>a,pR:()=>i});const o="https://backend.livhousing.com",i="c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://backend.livhousing.com"}.TRAINING_MEDIA_MAXSIZE,a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://backend.livhousing.com"}.CONVERSATION_MEDIA_MAXSIZE,s="AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IP_DATA_API_KEY:"c17b949cf58c45cae47ce1cc65efc8240f77a2a69ca09ad4c4208852",REACT_APP_VERSION:"1",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAQMYGdP2AmloNtJm4ZDrJxPuSfuo2RSXM",REACT_APP_BACKEND_URL:"https://backend.livhousing.com"}.REACT_APP_NGROK_BACKEND_URL||"https://backend.livhousing.com"},51637:(t,e,n)=>{n.d(e,{A:()=>u});var o=n(9950),i=n(14857),r=n(48089),a=n(45180),s=n(82053),c=n(50704),d=n(44414);const l={p:2.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},u=(0,o.forwardRef)(((t,e)=>{let{border:n=!0,boxShadow:o,children:u,content:g=!0,contentSX:f={},darkTitle:b,elevation:h,secondary:A,shadow:p,sx:y={},title:_,...m}=t;const S=(0,i.A)();return o="dark"===S.palette.mode?o||!0:o,(0,d.jsxs)(r.A,{elevation:h||0,ref:e,...m,sx:{border:n?"1px solid":"none",borderRadius:2,borderColor:"dark"===S.palette.mode?S.palette.divider:S.palette.grey.A800,boxShadow:!o||n&&"dark"!==S.palette.mode?"inherit":p||S.customShadows.z1,":hover":{boxShadow:o?p||S.customShadows.z1:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:S.typography.fontFamily,fontSize:"0.75rem"},...y},children:[!b&&_&&(0,d.jsx)(a.A,{sx:l,titleTypographyProps:{variant:"subtitle1"},title:_,action:A}),b&&_&&(0,d.jsx)(a.A,{sx:l,title:(0,d.jsx)(s.A,{variant:"h3",children:_}),action:A}),g&&(0,d.jsx)(c.A,{sx:f,children:u}),!g&&u]})}))},77382:(t,e,n)=>{n.d(e,{CA:()=>g,L3:()=>u,Mk:()=>c,bZ:()=>d,gJ:()=>l});var o=n(8478),i=n(33340),r=n(32026),a=n(59051),s=n.n(a);async function c(t){const{organizationId:e,selectedBotId:n}=i.nc.getState(),r=await o.bE(`/bot/${e}/${n}/knowledge-base`,t);return i.nc.setState((e=>{const o={...e.kbDocs||{}},i=o[n];if(!i)return{};if(o[n]=[...i],t._id){const t=o[n].findIndex((t=>t._id===r._id));t>=0?o[n][t]=r:o[n].push(r)}else o[n].push(r);return{kbDocs:o}})),r}async function d(t){const{organizationId:e,selectedBotId:n,kbDocs:r}=i.nc.getState();if(t&&Array.isArray(null===r||void 0===r?void 0:r[n]))return;const a=await o.Jt(`/bot/${e}/${n}/knowledge-base/list`);i.nc.setState((t=>({kbDocs:{...t.kbDocs||{},[n]:a}})))}async function l(){var t;const{organizationId:e,selectedBotId:n,botsMap:a}=i.nc.getState(),c=`/bot/${e}/${n}/knowledge-base/download`,d=await o.Jt(c),l=(null===(t=a[n])||void 0===t?void 0:t.botName)||"KBDocs";(0,r.PE)(d,l+"_"+s()().format("YYYYMMDD")+".csv")}async function u(t){if(null===t||void 0===t||!t.length)return[];const{organizationId:e,selectedBotId:n}=i.nc.getState();return await o.Jt(`/bot/${e}/${n}/knowledge-base/list?${t.map((t=>`docIds=${t}`)).join("&")}`)}async function g(t){const{organizationId:e,selectedBotId:n}=i.nc.getState();await o.TF(`/bot/${e}/${n}/knowledge-base/${t}`),i.nc.setState((e=>{var o;const i={...e.kbDocs||{}};return i[n]=null===(o=i[n])||void 0===o?void 0:o.filter((e=>e._id!==t)),{kbDocs:i}}))}},92728:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(9950),i=n(48205),r=n(44414);const a=o.forwardRef((function(t,e){return(0,r.jsx)(i.A,{direction:"up",ref:e,...t})}))},93383:(t,e,n)=>{n.d(e,{A:()=>s});var o=n(9950),i=n(10226),r=n(46639),a=n(44414);const s=function(t){let{onClick:e,disabled:n,isLoading:s,children:c,...d}=t;const[l,u]=o.useState(s);return(0,a.jsxs)(i.A,{onClick:t=>{if(!e)return;const n=e(t);"function"===typeof(null===n||void 0===n?void 0:n.finally)&&(u(!0),n.finally((()=>u(!1))))},disabled:l||s||n,...d,children:[(l||s)&&(0,a.jsx)(r.A,{size:16,color:"primary",style:{marginRight:"10px"}}),c]})}},98415:(t,e,n)=>{n.d(e,{Ci:()=>u,I4:()=>l,TF:()=>c,gI:()=>a,gR:()=>f,jo:()=>d,rv:()=>b,so:()=>g,yo:()=>s});var o=n(8478),i=n(33340),r=n(32026);async function a(t){const{organization:{websiteUrl:e,_id:n}}=i.nc.getState(),r={organizationId:n,websiteUrl:e,botName:t,botDesign:{visitorMessageLogo:{name:"",url:""},botMessageLogo:{name:"",url:""},botChatButton:{name:"",url:""},botLogo:{name:"",url:""},backgroundColor:"#e7a654",textColor:"#ffffff",dimensions:{heightInPixel:"500px",heightInPercent:"70%",widthInPixel:"350px",widthInPercent:"25%"},botLogoDimensions:{heightInPixel:"30px",heightInPercent:"100%",widthInPixel:"30px",widthInPercent:"100%"}}};h(await o.bE(`/bot/${n}`,r),!0)}async function s(t,e,n){const{organizationId:r}=i.nc.getState();if(!r||!t)throw new Error("Bot details not found");const a=await o.yJ(`/bot/${r}/${t}`,e);return h(a,n),a}async function c(t){const{organizationId:e,selectedBotId:n}=i.nc.getState();if(!e||!t)throw new Error("Bot details not found");const{deleted:r}=await o.TF(`/bot/${e}/${t}`);if(r){let{botsMap:t,botsList:e}=i.nc.getState();t={...t},e=[...e],delete t[r];const o=e.findIndex((t=>t._id===r));o>=0&&e.splice(o,1);const s={botsMap:t,botsList:e};var a;if(n===r)s.selectedBotId=(null===(a=e[0])||void 0===a?void 0:a._id)||null;i.nc.setState(s)}return!!r}function d(t,e){let{botDesign:n}=i.nc.getState();return n={...n,...e},s(t,{botDesign:n})}async function l(t,e){const{organizationId:n,selectedBotId:r}=i.nc.getState(),a=new FormData;a.append("file",e);const s=await o.bE(`/bot/${n}/${r}/update-logo/${t}`,a);return b(r,s),s[`botDesign.${t}`]}async function u(t){const{organizationId:e,selectedBotId:n}=i.nc.getState(),r=await o.TF(`/bot/${e}/${n}/update-logo/${t}`);return b(n,r),r[`botDesign.${t}`]}function g(t,e){return s(t,{botName:e})}function f(t,e){let{botSettings:n={}}=i.nc.getState();return n={...n,...e},s(t,{botSettings:n})}function b(t,e){const{botsMap:n}=i.nc.getState(),o=n[t];if(!o)return;h(Object.keys(e).reduce(((t,n)=>(0,r.G6)(t,n,e[n])),o))}function h(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=t._id;let{botsMap:o,botsList:r}=i.nc.getState();o={...o,[n]:t},r=[...r];const a=r.findIndex((t=>t._id===n));a>=0?r[a]=t:r.push(t);const s={botsMap:o,botsList:r};e&&(s.selectedBotId=n),i.nc.setState(s)}}}]);